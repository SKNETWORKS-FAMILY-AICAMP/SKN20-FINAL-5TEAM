# 의사코드 연습 기능 고도화 실행 계획서 (Scoring & Deep Dive)

수정일: 2026-02-13
작성자: Antigravity

본 계획서는 `plan.md` 및 공유된 문서를 바탕으로 하드코딩된 평가 및 꼬리질문 시스템을 동적으로 전환하고, 새로운 점수 체계(Rule 15% + LLM 85%)를 적용하기 위한 구체적인 변경 사항을 담고 있습니다.

## 1. 평가 및 점수 체계 변경 (Scoring Logic)

### 가중치 업데이트 (Rule 15 : LLM 85)
- **Rule 기반 검증 (15점)**: 필수 키워드(`split`, `fit`, `transform`) 포함 여부 및 물리적 순서 검증.
- **LLM 5차원 평가 (85점)**: 각 지표당 17점 만점 (5 x 17 = 85).
  - 지표명 변경: 설계력(25), 정합성(20), 구현력(10), 예외처리(15), 추상화(15)로 배점 차등화 (계획서 기준).

### 5차원 지표 재정의
- **설계력 (Design)**: 전처리의 논리적 개연성 (25점)
- **정합성 (Consistency)**: 누수 방지 원칙 유지 (20점)
- **구현력 (Implementation)**: 파이썬 변환 가능성 (10점)
- **예외처리 (Edge Case)**: 확장 상황 대응력 (15점)
- **추상화 (Abstraction)**: 구조화 및 키워드 사용 (15점)

## 2. 화면(UI) 및 실시간 힌트 변경점

### 실시간 '오리 힌트' 시스템 구현
- **화면 변경**: 에디터 영역 옆의 코덕(오리) 캐릭터 클릭 시 `useCoduckWars.js`에서 작성 중인 텍스트를 분석하여 4가지 유형의 힌트 출력.
- **감지 로직**:
  - **유형 1 (격리)**: `split` 누락 또는 `fit`이 `split`보다 선행 시 출력.
  - **유형 2 (기준점)**: `fit(all)`, `fit(test)` 등 잘못된 기준점 감지 시 출력.
  - **유형 3 (일관성)**: `transform` 누락 또는 테스트 데이터 처리 누락 시 출력.
  - **유형 4 (추상화)**: 논리 연결(`->` 등) 부재 또는 지나치게 짧을 시 출력.

### 최종 리포트 화면 고도화
- **페르소나 뱅크 적용**: 점수 조합에 따라 '원칙 중심의 이론가', '손이 빠른 실무형 코더' 등 칭호와 전용 아이콘 표시.
- **직접 임베딩 플레이어**: 유튜브 추천 영상을 모달이 아닌 리포트 페이지 내에 직접 임베딩하여 로딩 없이 재생.

## 3. 동적 꼬리질문 (Deep Dive) 시스템

### 하드코딩 탈피 및 시나리오 적용
- **동적 생성**: LLM이 사용자의 의사코드를 기반으로 아래 3대 시나리오 중 하나를 선택하여 질문 생성.
  1. **데이터 드리프트**: 시간 경과에 따른 분포 변화 대응.
  2. **실시간 서빙**: 성능과 정확도의 트레이드오프.
  3. **데이터 부족**: 소량 데이터셋에서의 검증 전략.
- **변환 코드 연동**: 사용자의 의사코드가 반영된 Python 코드를 먼저 보여주고, 그 코드의 취약점을 공격하는 꼬리질문으로 연결.

## 4. 단계별 수정 파일 목록

1.  **Backend (`pseudocode_evaluation.py`)**:
    *   `SYSTEM_PROMPT`를 신규 5차원 루브릭 및 페르소나 생성 규칙으로 교체.
    *   Deep Dive 시나리오 3종을 프롬프트에 내장하여 동적 질문 생성.
2.  **Frontend API (`pseudocodeApi.js`)**:
    *   15/85 점수 스케일링 로직 수정.
    *   평가 결과에 따른 페르소나 판별 로직 추가.
3.  **Frontend Logic (`useCoduckWars.js`)**:
    *   오리 클릭 시 실시간 텍스트 분석 및 4대 힌트 메시지 매핑.
    *   하드코딩된 `deepQuizQuestion`을 백엔드 수신 데이터로 대체.
4.  **Frontend View (`CoduckWars.vue`)**:
    *   페르소나 카드 UI 및 유튜브 인라인 플레이어 UI 구현.

---
**보고**: 본 계획서는 사용자가 제공한 `plan.md`의 모든 요구사항(루브릭, 힌트 메시지, 딥다이브 시나리오)을 포함하고 있습니다. 승인 시 바로 수정을 시작합니다.
