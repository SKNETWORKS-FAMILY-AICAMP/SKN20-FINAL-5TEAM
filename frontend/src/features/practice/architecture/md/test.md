❯ 제시해주신 코드는 시니어 아키텍트의 시각에서 지원자의 설계를 다각도로 검증하려는 의도가 잘                
  녹아있습니다. 특히 **AWS Well-Architected 6대 기둥(Pillars)**을 기준으로 삼은 점은 매우 훌륭한        
  접근입니다.                                                                                               

  하지만 '질문의 날카로움'과 '추론의 정확도'를 높이기 위해 개선이 필요한 지점들이 보입니다. 실현 가능한        작은 단위로 쪼개어 분석 및 개선 방안을 제안해 드립니다.

  ---

  ## 1. 현재 방식의 문제점 (Critique)

  * **정보 과부하 (Prompt Fatigue):** `principlesText` 전체를 프롬프트에 때려 넣으면, 모델이 정작       
  중요한 **'지원자의 다이어그램'**보다 **'교과서적인 원칙'**에 매몰될 가능성이 큽니다.
  * **컴포넌트 관계 파악의 한계:** 단순히 텍스트 리스트(`A -> B`)만으로는 계층 구조(Public/Private      
  Subnet)나 데이터의 흐름 방향을 입체적으로 이해하기 어렵습니다.
  * **비판적 시각의 부재:** 현재 프롬프트는 "부족한 걸 찾아라"고만 되어 있어, 이미 배치된 컴포넌트 간의 
   **잘못된 설정(Antipattern)**을 짚어내는 데 약합니다.
                                                                                                            
  ---                                                                                                       
                                                                                                            
  ## 2. 실현 가능한 단계별 개선 방안                                                                        
                                                                                                            
  ### 1단계: 프롬프트 전략 수정 (질문 퀄리티 향상)                                                          
                                                                                                            
  가장 먼저 할 수 있는 일은 AI에게 **"공격수"** 역할을 더 명확히 부여하는 것입니다.                         
                                                                                                            
  * **개선안:** 질문 생성 규칙에 **"안티패턴 체크리스트"**를 추가하세요.                                    
  * **구체적 방법:** * "부족한 부분 찾기" 대신 **"설계의 모순 찾기"** 지시 추가.                            
  * 예: "DB가 Public Subnet에 있지는 않은지?", "SPOF(단일 장애점)가 존재하는지?" 확인하게 유도.             
                                                                                                            
                                                                                                            
                                                                                                            
  ### 2단계: 데이터 전처리 최적화 (Context 정제)                                                            
                                                                                                            
  6대 기둥의 모든 텍스트를 매번 보낼 필요가 없습니다.                                                       
                                                                                                            
  * **개선안:** 문제 시나리오에 따라 **관련성 높은 기둥(Pillar)만 선별**하여 주입하세요.                    
  * **구체적 방법:**                                                                                        
  ```javascript                                                                                             
  // (예시) 시나리오에 '트래픽 급증' 키워드가 있다면 '성능/신뢰성' 기둥만 추출                              
  const filteredPrinciples = filterPrinciplesByScenario(scenario);                                          
                                                                                                            
  ```                                                                                                       
                                                                                                            
                                                                                                            
  * 이렇게 하면 LLM의 주의력(Attention)이 분산되지 않아 질문이 훨씬 구체적으로 변합니다.                    
                                                                                                            
                                                                                                            
                                                                                                            
  ### 3단계: 아키텍처 해석 능력 강화 (추론 정확도 향상)                                                     
                                                                                                            
  현재의 단순 텍스트 나열보다 LLM이 구조를 더 잘 이해하게 도와야 합니다.                                    
                                                                                                            
  * **개선안:** Mermaid 코드의 의미를 **'역할군(Role-based)'**으로 묶어 요약해서 전달하세요.                
  * **구체적 방법:** * `componentList`를 만들 때, `Entry Points`, `Compute`, `Storage`, `Security`          
  카테고리로 분류하여 전달.                                                                                 
  * 단순히 `A -> B`가 아니라 `Client -> LoadBalancer (Traffic Flow)` 처럼 관계의 의미를 명시.               
                                                                                                            
                                                                                                            
      
  ### 4단계: 질문의 '깊이' 조절 (Follow-up Logic)                                                           
                                                                                                            
  단답형 질문이 아닌, 사고를 자극하는 질문이 필요합니다.                                                    
                                                                                                            
  * **개선안:** 질문 생성 시 **'Chain of Thought(사고의 사슬)'**를 강제하세요.                              
  * **구체적 방법:** * 출력 형식에 `thought_process` 필드를 추가하여, AI가 왜 이 질문을 던졌는지 논리를     
   먼저 쓰게 한 뒤 질문을 생성하게 합니다. (이는 최종 사용자에게는 보여주지 않아도 모델 성능 향상에 큰      
  도움이 됩니다.)                                                                                           
                                                                                                            
  ---                                                                                                       
                                                                                                            
  ## 3. 요약: 질문 퀄리티를 높이는 핵심 팁                                                                  
                                                                                                            
  | 우선순위 | 개선 항목 | 기대 효과 |                                                                      
  | --- | --- | --- |                                                                                       
  | **High** | **사고 과정(CoT) 요구** | 질문의 논리적 개연성 및 구체성 확보 |                              
  | **Mid** | **안티패턴 탐지 지시** | 교과서적인 질문 탈피, 날카로운 지적 가능 |                           
  | **Low** | **Pillar 선별 주입** | 토큰 절약 및 모델의 집중도 향상 |                                      
                                                                                                            
  ---                                                                                                       
                                                                                                            
  **다음 단계로 무엇을 도와드릴까요?**                                                                      
  이 개선안을 반영하여 **프롬프트 텍스트를 직접 수정**해 드릴까요, 아니면 **안티패턴 체크리스트             
  샘플**을 만들어 드릴까요? 이 의견에 대해 어떻게 생각해                                                    

● 좋은 지적 감사합니다! 제시된 개선안들이 매우 체계적이고 실현 가능해 보입니다. 현재 코드를 먼저 확인한 후
  의견을 드리겠습니다.
                                                                                                            ● Read 2 files (ctrl+o to expand)    
                                                                                                            ● 코드를 확인했습니다. 제시된 개선안이 매우 실질적이고 우선순위가 명확하네요. 현재 구현 상황과 비교하면:       
  📊 현재 코드 분석                                                                                         
  
  강점:                                                                                                       - ✅ 6개 관점 병렬 생성 & 점수 기반 선별 로직이 잘 구현됨                                                 
  - ✅ Decision points, axis weights 활용한 문제 맞춤화
  - ✅ Fallback 질문으로 안정성 확보

  개선 필요 지점 (제시된 개선안과 일치):
  1. 줄 424-426: 전체 principles 텍스트를 매번 주입 → 정보과부하
  2. 줄 353-358: 단순 텍스트 componentList, connectionList → 역할 분류 부족
  3. 줄 364-454의 프롬프트: 안티패턴 체크리스트 규칙 없음
  4. 출력 형식: Chain of Thought 단계 없음

  ---
  🎯 제안: 단계별 실행 계획

  제시된 우선순위와 현재 코드를 고려하면, 이렇게 진행하는 게 가장 효과적입니다:

  Phase 1 (High Priority): 프롬프트 개선 (즉시 효과)

  - 안티패턴 체크리스트 추가 (SPOF, Public DB, 단일 경로 등)
  - CoT 강제 추가 (내부 처리용, 외부 노출 X)

  Phase 2 (Mid Priority): Pillar 선별 주입

  - 문제의 keywords에 따라 상위 2-3개 pillar만 추출
  - 토큰 50% 절약 + 집중도 향상

  Phase 3 (Low Priority): 아키텍처 해석 강화

  - Component → Role-based 분류 추가

  ---
  🤔 다음 단계 확인 질문

  어느 방향으로 진행하시겠어요?

  1. 프롬프트만 개선 (Phase 1)
  → 가장 빠르고, 즉시 질문 품질 향상
  → 예상 소요시간: 15-20분
  2. Phase 1 + 2 동시 진행 (권장)
  → 질문 품질 + 토큰 효율성 모두 해결
  → 예상 소요시간: 30-40분
  3. 3개 Phase 전부 구현 (완성도 최고)
  → 완벽한 개선, 하지만 더 복잡함
  → 예상 소요시간: 60분+

  어느 옵션을 선택하실 건가요? 아니면 안티패턴 체크리스트 샘플을 먼저 보시고 나서 결정하실래요?