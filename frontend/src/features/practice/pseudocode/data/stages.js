// ========================================
// stages.js - Quest ?꾩쟾??// [2026-02-14] 5李⑥썝 硫뷀듃由?諛?2?④퀎 寃利?Trigger MCQ -> 3? ?쒕굹由ъ삤 Deep Dive) ?듯빀
// ========================================

import { VALIDATION_LIBRARY, CODE_VALIDATION_LIBRARY } from './validationRules_COMPLETE.js';

export const aiQuests = [
    {
        id: 1,
        title: "?꾩쿂由??곗씠???꾩닔 諛⑹뼱 ?쒖뒪???ㅺ퀎",
        category: "System Reboot",
        emoji: "?슚",
        desc: "AI 紐⑤뜽???좊ː?깆쓣 ?뚭눼?섎뒗 ?꾩쿂由??곗씠???꾩닔瑜?李⑤떒?섍퀬 寃ш퀬??寃利?洹쒖튃???ㅺ퀎?⑸땲??",
        rewardXP: 500,
        subModuleTitle: "LEAKAGE_GUARD",
        character: { name: "Coduck", image: "/assets/characters/coduck.png" },
        scenario: "?좎엯 媛쒕컻?먭? ?묒꽦???댄깉 ?덉륫 紐⑤뜽??寃利?Validation) ?뺥솗??95%瑜?湲곕줉?섎ŉ 諛고룷?섏뿀?쇰굹, ?ㅼ젣 怨좉컼 ?곗씠?곌? ?ㅼ뼱?ㅻ뒗 ?댁쁺(Serving) ?섍꼍?먯꽌??68%???깅뒫??蹂댁씠硫?鍮꾩쫰?덉뒪?????먯떎???낇삍?듬땲?? 議곗궗 寃곌낵, ?곗씠???꾩쿂由??④퀎?먯꽌 '?뺣낫 ?좎텧(Leakage)'??諛쒖깮??寃껋쑝濡??뚯븙?섏뿀?듬땲??",

        cards: [
            { icon: "?쉻", text: "STEP 1: ?꾪뿕 吏꾨떒", coduckMsg: "二쇰땲??媛쒕컻?먯쓽 移섎챸?곸씤 ?ㅼ닔媛 諛쒓껄?섏뿀?듬땲?? 臾댁뾿??臾몄젣?몄? 癒쇱? ?뚯븙?⑹떆??" },
            { icon: "?뱷", text: "STEP 2: 洹쒖튃 ?ㅺ퀎", coduckMsg: "?대윴 ?ㅼ닔媛 ?щ컻?섏? ?딅룄濡?AI媛 ?먮룞?쇰줈 媛먯??????덈뒗 寃利?洹쒖튃??留뚮뱶?몄슂." },
            { icon: "?뮲", text: "STEP 3: ?ы솕 寃利?, coduckMsg: "?⑥닚??洹쒖튃???섏뼱, ??援먮쵖???꾩닔 ?⑦꽩???≪븘?????덈뒗吏 ?뺤씤??遊낆떆??" },
            { icon: "?뽳툘", text: "STEP 4: 理쒖쥌 ?됯?", coduckMsg: "?뱀떊???꾪궎?띿쿂 ?ㅺ퀎 ?λ젰??AI ?꾪궎?랁듃媛 ?뺣? ?됯??⑸땲??" }
        ],

        blueprint: `
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler

# 1. Isolation: ?꾩쿂由???臾쇰━??遺꾨━ (理쒖슦??諛⑹뼱??
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

# 2. Anchor: ?ㅼ쭅 ?숈뒿 ?곗씠?곕줈留??듦퀎??fit) 異붿텧
scaler = StandardScaler()
scaler.fit(X_train)

# 3. Consistency: ?숈뒿?뗭쓽 湲곗??먯쑝濡??뚯뒪?몄뀑源뚯? 蹂??X_train_scaled = scaler.transform(X_train)
X_test_scaled = scaler.transform(X_test)
        `.trim(),

        blueprintSteps: [
            { id: "s1", python: "X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)", pseudo: "癒쇱? ?곗씠?곕? ?숈뒿?⑷낵 寃利앹슜?쇰줈 臾쇰━??寃⑸━(Isolation)?쒕떎.", keywords: ["寃⑸━", "遺꾨━", "?숈뒿/寃利?, "Isolation"] },
            { id: "s2", python: "scaler.fit(X_train)", pseudo: "?숈뒿 ?곗씠??train)?먯꽌留??듦퀎?됱쓣 異붿텧?섏뿬 湲곗???Anchor)???ㅼ젙?쒕떎.", keywords: ["湲곗???, "?숈뒿?곗씠??, "?듦퀎??, "fit"] },
            { id: "s3", python: "scaler.transform(X_test)", pseudo: "?뚯뒪???곗씠??test)?먮뒗 fit ?놁씠 transform留??곸슜?섏뿬 ?쇨???Consistency)???좎??쒕떎.", keywords: ["?쇨???, "?뚯뒪?몃뜲?댄꽣", "transform", "?숈씪蹂??] }
        ],

        interviewQuestions: [
            {
                id: "concept_1_choice",
                type: "CHOICE",
                question: "Q1. [寃⑸━???쒖젏] ?곗씠???ㅼ뿼??留됰뒗 泥?踰덉㎏ 諛⑹뼱??n?좎엯 媛쒕컻?먭? 踰뷀븳 媛?????ㅼ닔??scaler.fit(df)瑜??듯빐 ?꾩껜 ?곗씠?곗쓽 ?뺣낫瑜??욎뼱踰꾨┛ 寃껋엯?덈떎. ?대? 諛⑹??섍린 ?꾪븳 媛???곗꽑?곸씤 議곗튂??臾댁뾿?멸???",
                options: [
                    { text: "??留롮? ?곗씠?곕? ?섏쭛?섏뿬 紐⑤뜽??蹂듭옟?섍쾶 留뚮뱺??", correct: false, feedback: "?곗씠???묒쓣 ?섎━??寃껉낵 ?뺣낫 ?좎텧 諛⑹???臾닿??⑸땲??" },
                    { text: "?꾩쿂由?Scaling)瑜?紐⑤몢 留덉튇 ???곗씠?곕? ?섎늿??", correct: false, feedback: "?닿쾬??諛붾줈 ?좎엯 媛쒕컻?먭? 踰뷀븳 ?ㅼ닔(?꾩닔 諛쒖깮)?낅땲??" },
                    { text: "?곗씠???꾩쿂由??꾨줈?몄뒪媛 ?쒖옉?섍린 ?? ?숈뒿(Train)怨??뚯뒪??Test) ?곗씠?곕? 臾쇰━?곸쑝濡?遺꾨━(寃⑸━)?쒕떎.", correct: true, feedback: "?뺣떟?낅땲?? ?꾩쿂由???遺꾨━媛 媛???뺤떎??諛⑹뼱?좎엯?덈떎." },
                    { text: "?댁쁺 ?섍꼍?먯꽌???꾩쿂由щ? ?앸왂?쒕떎.", correct: false, feedback: "?숈뒿 ?뚯? ?숈씪???꾩쿂由ш? ?댁쁺 ?섍꼍?먯꽌??諛섎뱶???꾩슂?⑸땲??" }
                ],
                context: "?곗씠???꾩쿂由??꾩닔(Leakage) ?먯쿇 李⑤떒 ?꾨왂"
            },
            {
                id: "concept_2_choice",
                type: "CHOICE",
                question: "Q2. [湲곗??먯쓽 ?ㅼ젙] '???? 臾댁뾿?쇰줈 留뚮뱾?댁빞 ?섎뒗媛?\n?곗씠?곕? 遺꾨━???? ?쒖???Standardization)瑜??꾪븳 ?됯퇏怨??쒖??몄감 媛믪? ?대뒓 ?곗씠?곗뀑?먯꽌 異붿텧?댁빞 ?섎굹??",
                options: [
                    { text: "?꾩껜 ?곗씠?곗뀑: ?곗씠?곌? 留롮쓣?섎줉 ?듦퀎?됱씠 ?뺥솗?섍린 ?뚮Ц?대떎.", correct: false, feedback: "?꾩껜 ?곗씠?곕? ?ъ슜?섎㈃ ?뚯뒪???곗씠?곗쓽 ?뺣낫媛 ?ㅻŉ?ㅼ뼱 '?곗씠???꾩닔'媛 諛쒖깮?⑸땲??" },
                    { text: "?뚯뒪???곗씠?곗뀑: ?ㅼ젣 ?댁쁺 ?섍꼍怨??좎궗??遺꾪룷瑜?媛?몄빞 ?섍린 ?뚮Ц?대떎.", correct: false, feedback: "?뚯뒪???곗씠?곕뒗 誘몃옒???곗씠????븷???댁빞 ?섎ŉ, ?대? 湲곗??쇰줈 ?쇱븘?쒕뒗 ???⑸땲??" },
                    { text: "?숈뒿 ?곗씠?곗뀑: 紐⑤뜽??'?대? ?뚭퀬 ?덈뒗 怨쇨굅???뺣낫'留뚯쓣 湲곗??쇰줈 ?쇱븘???섍린 ?뚮Ц?대떎.", correct: true, feedback: "?뺣떟?낅땲?? ?숈뒿 ?곗씠?곗뿉???살? '????됯퇏/?쒖??몄감)'濡?紐⑤뱺 ?곗씠?곕? 痢≪젙?댁빞 ?뺣낫 ?좎텧???놁뒿?덈떎." },
                    { text: "臾댁옉??異붿텧: ?명뼢??諛⑹??섍린 ?꾪빐 留ㅻ쾲 ?덈줈 怨꾩궛?댁빞 ?쒕떎.", correct: false, feedback: "湲곗????????留ㅻ쾲 諛붾뚮㈃ 紐⑤뜽???먮떒 湲곗????붾뱾由ш쾶 ?⑸땲??" }
                ],
                context: "?좊ː?????덈뒗 紐⑤뜽 ?됯? 湲곗? ?뺣┰"
            },
        ],

        designContext: {
            title: "[誘몄뀡] ?곗씠???ㅼ뿼 ?먯쿇 李⑤떒 ?ㅺ퀎",
            description: "?ㅼ젣 ?댁쁺 ?섍꼍?먯꽌 ??紐⑤뜽??'諛붾낫'媛 ?섏? ?딅룄濡? ?곗씠???ㅼ뿼???먯쿇 李⑤떒?섎뒗 ?꾩쿂由??뚯씠?꾨씪?몄쓽 ?ㅺ퀎 ?먯튃怨?洹??쒖꽌瑜?'?섏궗肄붾뱶(Pseudo Code)' ?뺥깭濡??쒖닠?섏꽭??",
            incidentCode: `
scaler = StandardScaler()
scaler.fit(df)  # ?좑툘 ?꾩껜 ?곗씠?곕줈 fit
X_train = scaler.transform(df[:800])
X_test = scaler.transform(df[800:])
            `.trim(),
            incidentProblem: "fit() ?ㅽ뻾 ?쒖젏??Train/Test 遺꾪븷???섏? ?딆븘 Test ?듦퀎?됱씠 Train???곹뼢",
            currentIncident: `
?슚 湲닿툒 ?ш퀬 蹂닿퀬: ?꾩쿂由??곗씠???꾩닔 媛먯?
二쇰땲??媛쒕컻?먭? ?묒꽦???꾩쿂由?肄붾뱶媛 Production??諛고룷?섏뿀?듬땲??
fit() ?ㅽ뻾 ?쒖젏??Train/Test 遺꾪븷???섏? ?딆븘 Test ?듦퀎?됱씠 Train???곹뼢??二쇱뿀?듬땲??

寃곌낵: Train ?뺥솗??95% ??Test ?뺥솗??68% (27%p ??씫)
            `.trim(),
            engineeringRules: [
                "Train ?곗씠?곕줈留?fit ?쒕떎.",
                "Test ?곗씠?곕뒗 transform留??섑뻾?쒕떎.",
                "誘몃옒 ?곗씠?곗쓽 ?뺣낫???ъ슜?섏? ?딅뒗??",
                "?숈뒿怨??쒕튃? ?숈씪???꾩쿂由??먮쫫???ъ슜?쒕떎."
            ],
            writingGuide: `
[?꾩닔 ?ы븿 議곌굔 (Constraint)]
?듭씠 ?щ윭 媛덈옒濡??吏 ?딅룄濡??ㅼ쓬 3媛吏 ?ㅼ썙?쒕? 諛섎뱶???ъ슜?섏뿬 ?쇰━瑜?援ъ꽦?섍쾶 ?⑸땲??
寃⑸━ (Isolation): ?곗씠?곕? ?섎늻???쒖젏
湲곗???(Anchor): ?듦퀎??fit)??異붿텧??????쇨???(Consistency): ?숈뒿怨??댁쁺 ?섍꼍???숈씪??蹂??諛⑹떇
            `.trim()
        },

        // [2026-02-14] ?ㅻТ 3? ?ы솕 ?쒕굹由ъ삤 (?쒖닠???몄뀡)
        deepDiveScenarios: [
            {
                id: "drift",
                type: "SCENARIO_DESCRIPTIVE",
                axis: "?쒓컙",
                title: "?곗씠???쒕━?꾪듃 ?쒕굹由ъ삤",
                question: "1????怨좉컼痢?蹂?붾줈 ?곗씠??遺꾪룷媛 諛붾뚯뿀?듬땲?? 湲곗〈 湲곗???Anchor)??怨좎닔?섎㈃ ?깅뒫???⑥뼱吏??먮뜲, '?쇨??? ?먯튃??源④퀬 湲곗????ㅼ떆媛꾩쑝濡?諛붽? 寃껋씤媛?? ?꾨땲硫??ㅻⅨ ??덉씠 ?덈굹??",
                intent: "紐⑤뜽???명썑?붾? ?몄??섍퀬 二쇨린?곸씤 ?ы븰???뚯씠?꾨씪???ㅺ퀎 ??웾 ?뺤씤.",
                scoringKeywords: ["紐⑤땲?곕쭅", "?ы븰??, "湲곗???媛깆떊", "Retraining"],
                modelAnswer: "?ㅼ떆媛꾩쑝濡?湲곗???諛붽씀硫??먮떒 洹쇨굅媛 ?붾뱾由쎈땲?? ???'紐⑤땲?곕쭅'???듯빐 ?깅뒫 ??섎? 媛먯??섍퀬, ?덈줈???곗씠?곕줈 '二쇨린?곸씤 ?ы븰????吏꾪뻾?섏뿬 湲곗???Anchor)??怨듭떇?곸쑝濡?媛깆떊?댁빞 ?⑸땲??"
            },
            {
                id: "realtime",
                type: "SCENARIO_DESCRIPTIVE",
                axis: "?섍꼍",
                title: "?ㅼ떆媛??쒕튃 ?쒕굹由ъ삤",
                question: "0.1珥????묐떟???꾩슂???쒖뒪?쒖엯?덈떎. 留ㅻ쾲 寃⑸━? 湲곗???fit) 怨꾩궛??諛섎났?????녿뒗?? ?뺥솗?꾨? 吏?ㅻŉ ?띾룄瑜??뺣낫???붿??덉뼱留곸쟻 諛⑸쾿? 臾댁뾿?멸???",
                intent: "?숈뒿 ?쒖쓽 ?곹깭瑜??쒕튃 ?섍꼍?쇰줈 ?꾩씠?섎뒗 吏곷젹??湲곗닠 ?뺤씤.",
                scoringKeywords: ["Pickle", "Joblib", "吏곷젹??, "媛앹껜??, "Serialization"],
                modelAnswer: "?숈뒿 ?④퀎?먯꽌 ?앹꽦??Scaler 媛앹껜瑜?'Pickle'?대굹 'Joblib'?쇰줈 吏곷젹??Serialization)?섏뿬 ??ν빀?덈떎. ?댁쁺 ?섍꼍?먯꽌???대? 濡쒕뱶?섏뿬 fit 怨쇱젙 ?놁씠 transform留??섑뻾?⑥쑝濡쒖뜥 ?뺥솗?꾩? ?띾룄瑜??숈떆???≪뒿?덈떎."
            },
            {
                id: "scarcity",
                type: "SCENARIO_DESCRIPTIVE",
                axis: "?쒓퀎",
                title: "?곗씠??遺議?諛?遺덇퇏???쒕굹由ъ삤",
                question: "?곗씠?곌? 100嫄대퓧?대씪 寃⑸━瑜??섎㈃ ?숈뒿?????섍퀬, ???섏옄???ㅼ뿼??嫄깆젙?⑸땲?? ?먯튃??吏?ㅻ㈃?쒕룄 紐⑤뜽???쒕?濡?寃利앺븷 ?꾨왂??",
                intent: "?뚮웾 ?곗씠?곗뀑?먯꽌???듦퀎???좎쓽???뺣낫 ?λ젰 ?뺤씤.",
                scoringKeywords: ["K-Fold", "Stratified", "援먯감 寃利?, "痢듯솕"],
                modelAnswer: "?⑥닚 遺꾪븷 ???'K-Fold 援먯감 寃利??대굹 'Stratified Sampling(痢듯솕 異붿텧)'???ъ슜?⑸땲?? ?곗씠?곕? ?щ윭 議곌컖?쇰줈 ?섎늻??紐⑤뱺 ?곗씠?곌? ??踰덉뵫? 寃利앹슜?쇰줈 ?곗씠寃??섎릺, 留?猷⑦봽留덈떎 寃⑸━ ?먯튃? ?꾧꺽??吏?듬땲??"
            }
        ],

        // [2026-02-14] ??COMPLETE 踰꾩쟾 寃利?洹쒖튃 ?곸슜
        validation: VALIDATION_LIBRARY.data_leakage,
        codeValidation: CODE_VALIDATION_LIBRARY.data_leakage,

        mapPos: { x: 100, y: 450 }
    }
    // ... 異붽? ?ㅽ뀒?댁???Quest 1怨??숈씪??援ъ“濡??뺤옣 媛??];
